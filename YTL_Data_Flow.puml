@startuml YTL_Data_Flow
title YTL Cement - Data Flow Architecture (To-Be State)
skinparam backgroundColor #F5F5F5

rectangle "PAHANG CEMENT PLANT" as plant #FFE6E6 {
  component [S/4HANA MM\nModule] as plant_mm
  component [Material\nMaster] as mm_data
  component [Purchase\nRequisitions] as pr_data
  component [Goods\nReceipt] as gr_data
}

rectangle "WEIGHBRIDGE SYSTEM\n(Authoritative Source)" as wb #FFF9E6 {
  component [Material\nTransactions] as wb_data
  component [Inbound:\nRaw Materials] as wb_in
  component [Processing:\nCement Creation] as wb_process
  component [Outbound:\nFinished Goods] as wb_out
}

rectangle "S/4HANA INVENTORY\n(Central ERP)" as inventory #E6F3FF {
  component [Material\nMovements (GI)] as inv_movements
  component [Cost\nAssignments] as inv_cost
  component [GL Postings\n(Auto)] as inv_gl
}

rectangle "S/4HANA SALES\n(Intercompany)" as sales_intra #E6F3FF {
  component [Sales Orders\n(Plant -> Marketing)] as so_intra
  component [Delivery Orders] as do_intra
  component [Intercompany\nInvoicing] as inv_intra
}

rectangle "YTL CEMENT MARKETING COMPANY" as marketing #E6E6FF {
  component [S/4HANA SD\nModule] as marketing_sd
  component [Customer\nOrders] as customer_orders
  component [Delivery\nOrders] as customer_do
  component [Customer\nInvoicing] as customer_inv
}

rectangle "MVP MODULES\n(Intelligence & Automation)" as mvp #CCFFCC {
  component [Invoice Matching\nModule] as invoice_mod
  component [GL Anomaly\nDetector] as gl_mod
  component [Vendor Quality\nManager] as vendor_mod
  component [SoD Analyzer\nReal-Time] as sod_mod
  component [e-Invoice Module\n(LHDN)] as einvoice_mod
}

rectangle "S/4HANA GL\n(Financial Hub)" as gl_hub #FFFFCC {
  component [General Ledger\n(All transactions)] as gl_posting
  component [Cost Center\nAllocation] as cc_alloc
  component [Month-End\nClose] as close_process
}

rectangle "DATA WAREHOUSE\n(Analytics)" as dw #CCFFFF {
  component [Historical Data\nStorage] as dw_data
  component [Aggregated\nMetrics] as dw_metrics
  component [Analytics\nModels] as dw_models
}

rectangle "DASHBOARDS & REPORTING" as reports #FFFFDD {
  component [GL Close\nProgress] as report_gl
  component [Invoice Match\nAccuracy %] as report_invoice
  component [Vendor Quality\nScores] as report_vendor
  component [SoD Violations\nTracking] as report_sod
  component [e-Invoice\nSubmission Status] as report_einvoice
}

note bottom of plant
  **Volume Metrics:**
  - 28K invoices/month
  - 39K sales order items/month
  - 46K GL postings/month
  - ~1,300 invoices/working day
end note

note bottom of mvp
  **MVP Value-Add:**
  - Continuous monitoring (not just at posting)
  - Pattern detection across data
  - Predictive alerts & anomalies
  - Automated evidence collection
  - Real-time compliance tracking
end note

note bottom of reports
  **Expected Improvements:**
  - GL Close: 8 days -> 4 days
  - Invoice Accuracy: 98% -> 99.7%
  - SoD Detection: 6 months -> Real-time
  - e-Invoice: Manual -> 100% Automated
  - Dashboard: Day 8 -> Real-time
end note

@enduml
